<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Querydsl] 스프링 데이터 JPA가 제공하는 Querydsl 기능 | Yosong6729 Blog</title>
<meta name=keywords content="Querydsl"><meta name=description content="해당 글은 김영한님의 인프런 강의 실전! Querydsl을 듣고 내용을 정리하기 위한 것으로 자세한 설명은 해당 강의를 통해 확인할 수 있습니다.
여기서 소개하는 기능은 제약이 커서 조인이 들어가는 경우 처럼 복잡한 실무 환경에서 사용하기에는 많이 부족하다. 그래도 스프링 데이터에서 제공하는 기능이므로 간단히 소개하고, 왜 부족한지 설명하겠다.
인터페이스 지원 - QuerydslPredicateExecutor 공식 문서: https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl QuerydslPredicateExecutor 인터페이스
위의 기능들 이외에도 많은 기능들이 있다.
리포지토리에 적용
public interface MemberRepository extends JpaRepository<Member, Long>, MemberRepositoryCustom, QuerydslPredicateExecutor<Member> { } 테스트"><meta name=author content="yosong6729"><link rel=canonical href=https://yosong6729.github.io/post/querydsl---%EC%8A%A4%ED%94%84%EB%A7%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-jpa%EA%B0%80-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-querydsl-%EA%B8%B0%EB%8A%A5/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://yosong6729.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://yosong6729.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://yosong6729.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://yosong6729.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://yosong6729.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://yosong6729.github.io/post/querydsl---%EC%8A%A4%ED%94%84%EB%A7%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-jpa%EA%B0%80-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-querydsl-%EA%B8%B0%EB%8A%A5/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="[Querydsl] 스프링 데이터 JPA가 제공하는 Querydsl 기능"><meta property="og:description" content="해당 글은 김영한님의 인프런 강의 실전! Querydsl을 듣고 내용을 정리하기 위한 것으로 자세한 설명은 해당 강의를 통해 확인할 수 있습니다.
여기서 소개하는 기능은 제약이 커서 조인이 들어가는 경우 처럼 복잡한 실무 환경에서 사용하기에는 많이 부족하다. 그래도 스프링 데이터에서 제공하는 기능이므로 간단히 소개하고, 왜 부족한지 설명하겠다.
인터페이스 지원 - QuerydslPredicateExecutor 공식 문서: https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl QuerydslPredicateExecutor 인터페이스
위의 기능들 이외에도 많은 기능들이 있다.
리포지토리에 적용
public interface MemberRepository extends JpaRepository<Member, Long>, MemberRepositoryCustom, QuerydslPredicateExecutor<Member> { } 테스트"><meta property="og:type" content="article"><meta property="og:url" content="https://yosong6729.github.io/post/querydsl---%EC%8A%A4%ED%94%84%EB%A7%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-jpa%EA%B0%80-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-querydsl-%EA%B8%B0%EB%8A%A5/"><meta property="og:image" content="https://yosong6729.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-10-12T15:18:51+09:00"><meta property="article:modified_time" content="2024-10-12T15:18:51+09:00"><meta property="og:site_name" content="Yosong6729 Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yosong6729.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[Querydsl] 스프링 데이터 JPA가 제공하는 Querydsl 기능"><meta name=twitter:description content="해당 글은 김영한님의 인프런 강의 실전! Querydsl을 듣고 내용을 정리하기 위한 것으로 자세한 설명은 해당 강의를 통해 확인할 수 있습니다.
여기서 소개하는 기능은 제약이 커서 조인이 들어가는 경우 처럼 복잡한 실무 환경에서 사용하기에는 많이 부족하다. 그래도 스프링 데이터에서 제공하는 기능이므로 간단히 소개하고, 왜 부족한지 설명하겠다.
인터페이스 지원 - QuerydslPredicateExecutor 공식 문서: https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl QuerydslPredicateExecutor 인터페이스
위의 기능들 이외에도 많은 기능들이 있다.
리포지토리에 적용
public interface MemberRepository extends JpaRepository<Member, Long>, MemberRepositoryCustom, QuerydslPredicateExecutor<Member> { } 테스트"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://yosong6729.github.io/post/"},{"@type":"ListItem","position":2,"name":"[Querydsl] 스프링 데이터 JPA가 제공하는 Querydsl 기능","item":"https://yosong6729.github.io/post/querydsl---%EC%8A%A4%ED%94%84%EB%A7%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-jpa%EA%B0%80-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-querydsl-%EA%B8%B0%EB%8A%A5/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Querydsl] 스프링 데이터 JPA가 제공하는 Querydsl 기능","name":"[Querydsl] 스프링 데이터 JPA가 제공하는 Querydsl 기능","description":"해당 글은 김영한님의 인프런 강의 실전! Querydsl을 듣고 내용을 정리하기 위한 것으로 자세한 설명은 해당 강의를 통해 확인할 수 있습니다.\n여기서 소개하는 기능은 제약이 커서 조인이 들어가는 경우 처럼 복잡한 실무 환경에서 사용하기에는 많이 부족하다. 그래도 스프링 데이터에서 제공하는 기능이므로 간단히 소개하고, 왜 부족한지 설명하겠다.\n인터페이스 지원 - QuerydslPredicateExecutor 공식 문서: https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl QuerydslPredicateExecutor 인터페이스\n위의 기능들 이외에도 많은 기능들이 있다.\n리포지토리에 적용\npublic interface MemberRepository extends JpaRepository\u0026lt;Member, Long\u0026gt;, MemberRepositoryCustom, QuerydslPredicateExecutor\u0026lt;Member\u0026gt; { } 테스트","keywords":["Querydsl"],"articleBody":" 해당 글은 김영한님의 인프런 강의 실전! Querydsl을 듣고 내용을 정리하기 위한 것으로 자세한 설명은 해당 강의를 통해 확인할 수 있습니다.\n여기서 소개하는 기능은 제약이 커서 조인이 들어가는 경우 처럼 복잡한 실무 환경에서 사용하기에는 많이 부족하다. 그래도 스프링 데이터에서 제공하는 기능이므로 간단히 소개하고, 왜 부족한지 설명하겠다.\n인터페이스 지원 - QuerydslPredicateExecutor 공식 문서: https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl QuerydslPredicateExecutor 인터페이스\n위의 기능들 이외에도 많은 기능들이 있다.\n리포지토리에 적용\npublic interface MemberRepository extends JpaRepository\u003cMember, Long\u003e, MemberRepositoryCustom, QuerydslPredicateExecutor\u003cMember\u003e { } 테스트\n@Test public void querydslPredicateExecutorTest() { Team teamA = new Team(\"teamA\"); Team teamB = new Team(\"teamB\"); em.persist(teamA); em.persist(teamB); Member member1 = new Member(\"member1\", 10, teamA); Member member2 = new Member(\"member2\", 20, teamA); Member member3 = new Member(\"member3\", 30, teamB); Member member4 = new Member(\"member4\", 40, teamB); em.persist(member1); em.persist(member2); em.persist(member3); em.persist(member4); QMember member = QMember.member; Iterable\u003cMember\u003e result = memberRepository.findAll (member.age.between(10, 40).and(member.username.eq(\"member1\"))); for (Member findMember : result) { System.out.println(\"member1 = \" + findMember); } } 쿼리 결과와 result 출력 결과를 보면 의도한데로 where 절에 조건이 들어간것을 확인할수 있다.\n한계점\n위에서 확인해본것 처럼 충분히 사용가능할거 같지만 여러가지 한계점이 있다.\n조인X (묵시적 조인은 가능하지만 left join이 불가능하다.) 테스트에서 본것처럼 서비스, 컨트롤러 계층에서 memberRepositry.findAll()에 Querydsl의 predicate를 작성하기때문에 Querydsl 구현 기수에 의존하게 된다. 그러면 나중에 구현 기술을 바꾸게 되면 리포지토리 계층이 아닌 서비스나 컨트롤러 계층에도 수정이 발생하게된다. 복잡한 실무 환경에서 사용하기에는 한계가 명확하다. Querydsl Web 지원 공식 문서: https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.web.type-safe 한계점\n단순한 조건만 가능 조건을 커스텀하는 기능이 복잡하고 명시적이지 않음 컨트롤러가 Querydsl에 의존 복잡한 실무환경에서 사용하기에는 한계가 명확 리포지토리 지원 - QuerydslRepositorySupport QuerydslRepoitorySupport는 공식문서에는 없다.\n자세한 코드 작성법은 실전! Querydsl에서 확인할수 있다.\n장점\ngetQuerydsl().applyPagincation() 스프링 데이터가 제공하는 페이징을 Querydsl로 편리하게 변환이 가능하다(단! Sort는 오류발생) from()으로 시작 가능(최근에는 QueryFactory를 사용해서 select()로 시작하는것이 더 명시적이다) EntityManager 제공 한계\nQuerydsl 3.x 버전을 대상으로 만듬 Querydsl 4.x에 나온 JPAQueryFactory로 시작할 수 없음 select로 시작할 수 없음 (from으로 시작해야함) QueryFactory를 제공하지 않음 스프링 데이터 Sort 기능이 정상 동작하지 않는다. Querydsl 지원 클래스 직접 만들기 스프링 데이터가 제공하는 QuerydslRepositorySupport가 지닌 한계를 극복하기 위해 직접 Querydsl 지원 클래스를 만들어 보자.\n장점\n스프링 데이토가 제공하는 페이징을 편리하게 변환 페이징과 카운트 쿼리 분리 가능 스프링 데이터 Sort 지원 select(), selectFrom()으로 시작 가능 EntityManager, QueryFactory 제공 Querydsl4RepositorySupport\nQuerydsl 4.x 버전에 맞춘 Querydsl 지원 라이브러리\n@Repository public abstract class Querydsl4RepositorySupport { private final Class domainClass; private Querydsl querydsl; private EntityManager entityManager; private JPAQueryFactory queryFactory; public Querydsl4RepositorySupport(Class\u003c?\u003e domainClass) { Assert.notNull(domainClass, \"Domain class must not be null!\"); this.domainClass = domainClass; } @Autowired public void setEntityManager(EntityManager entityManager) { Assert.notNull(entityManager, \"EntityManager must not be null!\"); JpaEntityInformation entityInformation = JpaEntityInformationSupport.getEntityInformation(domainClass, entityManager); SimpleEntityPathResolver resolver = SimpleEntityPathResolver.INSTANCE; EntityPath path = resolver.createPath(entityInformation.getJavaType()); this.entityManager = entityManager; this.querydsl = new Querydsl(entityManager, new PathBuilder\u003c\u003e(path.getType(), path.getMetadata())); this.queryFactory = new JPAQueryFactory(entityManager); } @PostConstruct public void validate() { Assert.notNull(entityManager, \"EntityManager must not be null!\"); Assert.notNull(querydsl, \"Querydsl must not be null!\"); Assert.notNull(queryFactory, \"QueryFactory must not be null!\"); } protected JPAQueryFactory getQueryFactory() { return queryFactory; } protected Querydsl getQuerydsl() { return querydsl; } protected EntityManager getEntityManager() { return entityManager; } protected \u003cT\u003e JPAQuery\u003cT\u003e select(Expression\u003cT\u003e expr) { return getQueryFactory().select(expr); } protected \u003cT\u003e JPAQuery\u003cT\u003e selectFrom(EntityPath\u003cT\u003e from) { return getQueryFactory().selectFrom(from); } protected \u003cT\u003e Page\u003cT\u003e applyPagination(Pageable pageable, Function\u003cJPAQueryFactory, JPAQuery\u003e contentQuery) { JPAQuery jpaQuery = contentQuery.apply(getQueryFactory()); List\u003cT\u003e content = getQuerydsl().applyPagination(pageable, jpaQuery).fetch(); return PageableExecutionUtils.getPage(content, pageable, jpaQuery::fetchCount); } protected \u003cT\u003e Page\u003cT\u003e applyPagination(Pageable pageable, Function\u003cJPAQueryFactory, JPAQuery\u003e contentQuery, Function\u003cJPAQueryFactory, JPAQuery\u003e countQuery) { JPAQuery jpaContentQuery = contentQuery.apply(getQueryFactory()); List\u003cT\u003e content = getQuerydsl().applyPagination(pageable, jpaContentQuery).fetch(); JPAQuery countResult = countQuery.apply(getQueryFactory()); return PageableExecutionUtils.getPage(content, pageable, countResult::fetchCount); } } Querydsl4RepositorySupprot 사용 코드\n@Repository public class MemberTestRepository extends Querydsl4RepositorySupport { public MemberTestRepository() { super(Member.class); } public List\u003cMember\u003e basicSelect() { return select(member) .from(member) .fetch(); } public List\u003cMember\u003e basicSelectFrom() { return selectFrom(member) .fetch(); } public Page\u003cMember\u003e searchPageByApplyPage(MemberSearchCondition condition, Pageable pageable) { JPAQuery\u003cMember\u003e query = selectFrom(member) .leftJoin(member.team, team) .where(usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ); List\u003cMember\u003e content = getQuerydsl().applyPagination(pageable, query) .fetch(); return PageableExecutionUtils.getPage(content, pageable, query::fetchCount); } public Page\u003cMember\u003e applyPagination(MemberSearchCondition condition, Pageable pageable) { return applyPagination(pageable, query -\u003e query.selectFrom(member) .leftJoin(member.team, team) .where(usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) ); } public Page\u003cMember\u003e applyPagination2(MemberSearchCondition condition, Pageable pageable) { return applyPagination(pageable, contentQuery -\u003e contentQuery .selectFrom(member) .leftJoin(member.team, team) .where(usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ), countQuery -\u003e countQuery .select(member.id) .from(member) .leftJoin(member.team, team) .where(usernameEq(condition.getUsername()), teamNameEq(condition.getTeamName()), ageGoe(condition.getAgeGoe()), ageLoe(condition.getAgeLoe()) ) ); } private BooleanExpression usernameEq(String username) { return hasText(username) ? member.username.eq(username) : null; } private BooleanExpression teamNameEq(String teamName) { return hasText(teamName) ? team.name.eq(teamName) : null; } private BooleanExpression ageGoe(Integer ageGoe) { return ageGoe != null ? member.age.goe(ageGoe) : null; } private BooleanExpression ageLoe(Integer ageLoe) { return ageLoe != null ? member.age.loe(ageLoe) : null; } } ","wordCount":"709","inLanguage":"en","image":"https://yosong6729.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-10-12T15:18:51+09:00","dateModified":"2024-10-12T15:18:51+09:00","author":{"@type":"Person","name":"yosong6729"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yosong6729.github.io/post/querydsl---%EC%8A%A4%ED%94%84%EB%A7%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-jpa%EA%B0%80-%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94-querydsl-%EA%B8%B0%EB%8A%A5/"},"publisher":{"@type":"Organization","name":"Yosong6729 Blog","logo":{"@type":"ImageObject","url":"https://yosong6729.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://yosong6729.github.io/ accesskey=h title="Yosong6729 블로그 (Alt + H)"><img src=https://yosong6729.github.io/apple-touch-icon.png alt aria-label=logo height=35>Yosong6729 블로그</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://yosong6729.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://yosong6729.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://example.org title=example.org><span>example.org</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://yosong6729.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://yosong6729.github.io/post/>Posts</a></div><h1 class="post-title entry-hint-parent">[Querydsl] 스프링 데이터 JPA가 제공하는 Querydsl 기능</h1><div class=post-meta><span title='2024-10-12 15:18:51 +0900 KST'>October 12, 2024</span>&nbsp;·&nbsp;yosong6729&nbsp;|&nbsp;<a href=https://github.com/yosong6729/blog/tree/main/content/post/Querydsl%20-%20%ec%8a%a4%ed%94%84%eb%a7%81%20%eb%8d%b0%ec%9d%b4%ed%84%b0%20JPA%ea%b0%80%20%ec%a0%9c%ea%b3%b5%ed%95%98%eb%8a%94%20Querydsl%20%ea%b8%b0%eb%8a%a5/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%ec%9d%b8%ed%84%b0%ed%8e%98%ec%9d%b4%ec%8a%a4-%ec%a7%80%ec%9b%90---querydslpredicateexecutor aria-label="인터페이스 지원 - QuerydslPredicateExecutor">인터페이스 지원 - QuerydslPredicateExecutor</a></li><li><a href=#querydsl-web-%ec%a7%80%ec%9b%90 aria-label="Querydsl Web 지원">Querydsl Web 지원</a></li><li><a href=#%eb%a6%ac%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac-%ec%a7%80%ec%9b%90---querydslrepositorysupport aria-label="리포지토리 지원 - QuerydslRepositorySupport">리포지토리 지원 - QuerydslRepositorySupport</a></li><li><a href=#querydsl-%ec%a7%80%ec%9b%90-%ed%81%b4%eb%9e%98%ec%8a%a4-%ec%a7%81%ec%a0%91-%eb%a7%8c%eb%93%a4%ea%b8%b0 aria-label="Querydsl 지원 클래스 직접 만들기">Querydsl 지원 클래스 직접 만들기</a></li></ul></div></details></div><div class=post-content><blockquote><p>해당 글은 김영한님의 인프런 강의 <a href=https://www.inflearn.com/course/querydsl-%EC%8B%A4%EC%A0%84>실전! Querydsl</a>을 듣고 내용을 정리하기 위한 것으로 자세한 설명은 해당 강의를 통해 확인할 수 있습니다.</p></blockquote><p>여기서 소개하는 기능은 제약이 커서 조인이 들어가는 경우 처럼 복잡한 실무 환경에서 사용하기에는 많이 부족하다. 그래도 스프링 데이터에서 제공하는 기능이므로 간단히 소개하고, 왜 부족한지 설명하겠다.</p><hr><h2 id=인터페이스-지원---querydslpredicateexecutor>인터페이스 지원 - QuerydslPredicateExecutor<a hidden class=anchor aria-hidden=true href=#인터페이스-지원---querydslpredicateexecutor>#</a></h2><ul><li>공식 문서: <a href=https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl>https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.extensions.querydsl</a></li></ul><p><strong>QuerydslPredicateExecutor 인터페이스</strong></p><p><img loading=lazy src=images/image.png alt=image.png></p><p>위의 기능들 이외에도 많은 기능들이 있다.</p><p><strong>리포지토리에 적용</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>MemberRepository</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>JpaRepository</span><span class=o>&lt;</span><span class=n>Member</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=n>MemberRepositoryCustom</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                                         </span><span class=n>QuerydslPredicateExecutor</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><strong>테스트</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Test</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>querydslPredicateExecutorTest</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Team</span><span class=w> </span><span class=n>teamA</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Team</span><span class=p>(</span><span class=s>&#34;teamA&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Team</span><span class=w> </span><span class=n>teamB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Team</span><span class=p>(</span><span class=s>&#34;teamB&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>em</span><span class=p>.</span><span class=na>persist</span><span class=p>(</span><span class=n>teamA</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>em</span><span class=p>.</span><span class=na>persist</span><span class=p>(</span><span class=n>teamB</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Member</span><span class=w> </span><span class=n>member1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Member</span><span class=p>(</span><span class=s>&#34;member1&#34;</span><span class=p>,</span><span class=w> </span><span class=n>10</span><span class=p>,</span><span class=w> </span><span class=n>teamA</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Member</span><span class=w> </span><span class=n>member2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Member</span><span class=p>(</span><span class=s>&#34;member2&#34;</span><span class=p>,</span><span class=w> </span><span class=n>20</span><span class=p>,</span><span class=w> </span><span class=n>teamA</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Member</span><span class=w> </span><span class=n>member3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Member</span><span class=p>(</span><span class=s>&#34;member3&#34;</span><span class=p>,</span><span class=w> </span><span class=n>30</span><span class=p>,</span><span class=w> </span><span class=n>teamB</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Member</span><span class=w> </span><span class=n>member4</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Member</span><span class=p>(</span><span class=s>&#34;member4&#34;</span><span class=p>,</span><span class=w> </span><span class=n>40</span><span class=p>,</span><span class=w> </span><span class=n>teamB</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>em</span><span class=p>.</span><span class=na>persist</span><span class=p>(</span><span class=n>member1</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>em</span><span class=p>.</span><span class=na>persist</span><span class=p>(</span><span class=n>member2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>em</span><span class=p>.</span><span class=na>persist</span><span class=p>(</span><span class=n>member3</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>em</span><span class=p>.</span><span class=na>persist</span><span class=p>(</span><span class=n>member4</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>QMember</span><span class=w> </span><span class=n>member</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>QMember</span><span class=p>.</span><span class=na>member</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Iterable</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>memberRepository</span><span class=p>.</span><span class=na>findAll</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>(</span><span class=n>member</span><span class=p>.</span><span class=na>age</span><span class=p>.</span><span class=na>between</span><span class=p>(</span><span class=n>10</span><span class=p>,</span><span class=w> </span><span class=n>40</span><span class=p>).</span><span class=na>and</span><span class=p>(</span><span class=n>member</span><span class=p>.</span><span class=na>username</span><span class=p>.</span><span class=na>eq</span><span class=p>(</span><span class=s>&#34;member1&#34;</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>Member</span><span class=w> </span><span class=n>findMember</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>result</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;member1 = &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>findMember</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>쿼리 결과와 result 출력 결과를 보면 의도한데로 where 절에 조건이 들어간것을 확인할수 있다.</p><p><img loading=lazy src=images/image%201.png alt=image.png></p><p><img loading=lazy src=images/image%202.png alt=image.png></p><p><strong>한계점</strong></p><p>위에서 확인해본것 처럼 충분히 사용가능할거 같지만 여러가지 한계점이 있다.</p><ul><li>조인X (묵시적 조인은 가능하지만 left join이 불가능하다.)</li><li>테스트에서 본것처럼 서비스, 컨트롤러 계층에서 memberRepositry.findAll()에 Querydsl의 predicate를 작성하기때문에 Querydsl 구현 기수에 의존하게 된다. 그러면 나중에 구현 기술을 바꾸게 되면 리포지토리 계층이 아닌 서비스나 컨트롤러 계층에도 수정이 발생하게된다.</li><li>복잡한 실무 환경에서 사용하기에는 한계가 명확하다.</li></ul><hr><h2 id=querydsl-web-지원>Querydsl Web 지원<a hidden class=anchor aria-hidden=true href=#querydsl-web-지원>#</a></h2><ul><li>공식 문서: <a href=https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.web.type-safe>https://docs.spring.io/spring-data/jpa/docs/2.2.3.RELEASE/reference/html/#core.web.type-safe</a></li></ul><p><strong>한계점</strong></p><ul><li>단순한 조건만 가능</li><li>조건을 커스텀하는 기능이 복잡하고 명시적이지 않음</li><li>컨트롤러가 Querydsl에 의존</li><li>복잡한 실무환경에서 사용하기에는 한계가 명확</li></ul><hr><h2 id=리포지토리-지원---querydslrepositorysupport>리포지토리 지원 - QuerydslRepositorySupport<a hidden class=anchor aria-hidden=true href=#리포지토리-지원---querydslrepositorysupport>#</a></h2><p>QuerydslRepoitorySupport는 공식문서에는 없다.</p><p>자세한 코드 작성법은 <a href=https://www.inflearn.com/course/querydsl-%EC%8B%A4%EC%A0%84>실전! Querydsl</a>에서 확인할수 있다.</p><p><strong>장점</strong></p><ul><li>getQuerydsl().applyPagincation() 스프링 데이터가 제공하는 페이징을 Querydsl로 편리하게 변환이 가능하다(단! Sort는 오류발생)</li><li>from()으로 시작 가능(최근에는 QueryFactory를 사용해서 select()로 시작하는것이 더 명시적이다)</li><li>EntityManager 제공</li></ul><p><strong>한계</strong></p><ul><li>Querydsl 3.x 버전을 대상으로 만듬</li><li>Querydsl 4.x에 나온 JPAQueryFactory로 시작할 수 없음<ul><li>select로 시작할 수 없음 (from으로 시작해야함)</li></ul></li><li>QueryFactory를 제공하지 않음</li><li>스프링 데이터 Sort 기능이 정상 동작하지 않는다.</li></ul><hr><h2 id=querydsl-지원-클래스-직접-만들기>Querydsl 지원 클래스 직접 만들기<a hidden class=anchor aria-hidden=true href=#querydsl-지원-클래스-직접-만들기>#</a></h2><p>스프링 데이터가 제공하는 QuerydslRepositorySupport가 지닌 한계를 극복하기 위해 직접 Querydsl 지원 클래스를 만들어 보자.</p><p><strong>장점</strong></p><ul><li>스프링 데이토가 제공하는 페이징을 편리하게 변환</li><li>페이징과 카운트 쿼리 분리 가능</li><li>스프링 데이터 Sort 지원</li><li>select(), selectFrom()으로 시작 가능</li><li>EntityManager, QueryFactory 제공</li></ul><p><strong>Querydsl4RepositorySupport</strong></p><p>Querydsl 4.x 버전에 맞춘 Querydsl 지원 라이브러리</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Repository</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=kd>class</span> <span class=nc>Querydsl4RepositorySupport</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Class</span><span class=w> </span><span class=n>domainClass</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Querydsl</span><span class=w> </span><span class=n>querydsl</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>EntityManager</span><span class=w> </span><span class=n>entityManager</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>JPAQueryFactory</span><span class=w> </span><span class=n>queryFactory</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>Querydsl4RepositorySupport</span><span class=p>(</span><span class=n>Class</span><span class=o>&lt;?&gt;</span><span class=w> </span><span class=n>domainClass</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Assert</span><span class=p>.</span><span class=na>notNull</span><span class=p>(</span><span class=n>domainClass</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Domain class must not be null!&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>domainClass</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>domainClass</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>setEntityManager</span><span class=p>(</span><span class=n>EntityManager</span><span class=w> </span><span class=n>entityManager</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Assert</span><span class=p>.</span><span class=na>notNull</span><span class=p>(</span><span class=n>entityManager</span><span class=p>,</span><span class=w> </span><span class=s>&#34;EntityManager must not be null!&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>JpaEntityInformation</span><span class=w> </span><span class=n>entityInformation</span><span class=w> </span><span class=o>=</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>JpaEntityInformationSupport</span><span class=p>.</span><span class=na>getEntityInformation</span><span class=p>(</span><span class=n>domainClass</span><span class=p>,</span><span class=w> </span><span class=n>entityManager</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>SimpleEntityPathResolver</span><span class=w> </span><span class=n>resolver</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>SimpleEntityPathResolver</span><span class=p>.</span><span class=na>INSTANCE</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>EntityPath</span><span class=w> </span><span class=n>path</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>resolver</span><span class=p>.</span><span class=na>createPath</span><span class=p>(</span><span class=n>entityInformation</span><span class=p>.</span><span class=na>getJavaType</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>entityManager</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>entityManager</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>querydsl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Querydsl</span><span class=p>(</span><span class=n>entityManager</span><span class=p>,</span><span class=w> </span><span class=k>new</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>PathBuilder</span><span class=o>&lt;&gt;</span><span class=p>(</span><span class=n>path</span><span class=p>.</span><span class=na>getType</span><span class=p>(),</span><span class=w> </span><span class=n>path</span><span class=p>.</span><span class=na>getMetadata</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>this</span><span class=p>.</span><span class=na>queryFactory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>JPAQueryFactory</span><span class=p>(</span><span class=n>entityManager</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@PostConstruct</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>validate</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Assert</span><span class=p>.</span><span class=na>notNull</span><span class=p>(</span><span class=n>entityManager</span><span class=p>,</span><span class=w> </span><span class=s>&#34;EntityManager must not be null!&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Assert</span><span class=p>.</span><span class=na>notNull</span><span class=p>(</span><span class=n>querydsl</span><span class=p>,</span><span class=w> </span><span class=s>&#34;Querydsl must not be null!&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Assert</span><span class=p>.</span><span class=na>notNull</span><span class=p>(</span><span class=n>queryFactory</span><span class=p>,</span><span class=w> </span><span class=s>&#34;QueryFactory must not be null!&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=n>JPAQueryFactory</span><span class=w> </span><span class=nf>getQueryFactory</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>queryFactory</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=n>Querydsl</span><span class=w> </span><span class=nf>getQuerydsl</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>querydsl</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=n>EntityManager</span><span class=w> </span><span class=nf>getEntityManager</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>entityManager</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>JPAQuery</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=nf>select</span><span class=p>(</span><span class=n>Expression</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>expr</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>getQueryFactory</span><span class=p>().</span><span class=na>select</span><span class=p>(</span><span class=n>expr</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>JPAQuery</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=nf>selectFrom</span><span class=p>(</span><span class=n>EntityPath</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>from</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>getQueryFactory</span><span class=p>().</span><span class=na>selectFrom</span><span class=p>(</span><span class=n>from</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>Page</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=nf>applyPagination</span><span class=p>(</span><span class=n>Pageable</span><span class=w> </span><span class=n>pageable</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                          </span><span class=n>Function</span><span class=o>&lt;</span><span class=n>JPAQueryFactory</span><span class=p>,</span><span class=w> </span><span class=n>JPAQuery</span><span class=o>&gt;</span><span class=w> </span><span class=n>contentQuery</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>JPAQuery</span><span class=w> </span><span class=n>jpaQuery</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>contentQuery</span><span class=p>.</span><span class=na>apply</span><span class=p>(</span><span class=n>getQueryFactory</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>content</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getQuerydsl</span><span class=p>().</span><span class=na>applyPagination</span><span class=p>(</span><span class=n>pageable</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>jpaQuery</span><span class=p>).</span><span class=na>fetch</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>PageableExecutionUtils</span><span class=p>.</span><span class=na>getPage</span><span class=p>(</span><span class=n>content</span><span class=p>,</span><span class=w> </span><span class=n>pageable</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>jpaQuery</span><span class=p>::</span><span class=n>fetchCount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>protected</span><span class=w> </span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>Page</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=nf>applyPagination</span><span class=p>(</span><span class=n>Pageable</span><span class=w> </span><span class=n>pageable</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                          </span><span class=n>Function</span><span class=o>&lt;</span><span class=n>JPAQueryFactory</span><span class=p>,</span><span class=w> </span><span class=n>JPAQuery</span><span class=o>&gt;</span><span class=w> </span><span class=n>contentQuery</span><span class=p>,</span><span class=w> </span><span class=n>Function</span><span class=o>&lt;</span><span class=n>JPAQueryFactory</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>JPAQuery</span><span class=o>&gt;</span><span class=w> </span><span class=n>countQuery</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>JPAQuery</span><span class=w> </span><span class=n>jpaContentQuery</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>contentQuery</span><span class=p>.</span><span class=na>apply</span><span class=p>(</span><span class=n>getQueryFactory</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>content</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getQuerydsl</span><span class=p>().</span><span class=na>applyPagination</span><span class=p>(</span><span class=n>pageable</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>jpaContentQuery</span><span class=p>).</span><span class=na>fetch</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>JPAQuery</span><span class=w> </span><span class=n>countResult</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>countQuery</span><span class=p>.</span><span class=na>apply</span><span class=p>(</span><span class=n>getQueryFactory</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>PageableExecutionUtils</span><span class=p>.</span><span class=na>getPage</span><span class=p>(</span><span class=n>content</span><span class=p>,</span><span class=w> </span><span class=n>pageable</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>countResult</span><span class=p>::</span><span class=n>fetchCount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p><strong>Querydsl4RepositorySupprot 사용 코드</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Repository</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MemberTestRepository</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>Querydsl4RepositorySupport</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=nf>MemberTestRepository</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>super</span><span class=p>(</span><span class=n>Member</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=nf>basicSelect</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>select</span><span class=p>(</span><span class=n>member</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>from</span><span class=p>(</span><span class=n>member</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>fetch</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=nf>basicSelectFrom</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>selectFrom</span><span class=p>(</span><span class=n>member</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>fetch</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Page</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=nf>searchPageByApplyPage</span><span class=p>(</span><span class=n>MemberSearchCondition</span><span class=w> </span><span class=n>condition</span><span class=p>,</span><span class=w> </span><span class=n>Pageable</span><span class=w> </span><span class=n>pageable</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>JPAQuery</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>selectFrom</span><span class=p>(</span><span class=n>member</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>leftJoin</span><span class=p>(</span><span class=n>member</span><span class=p>.</span><span class=na>team</span><span class=p>,</span><span class=w> </span><span class=n>team</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>where</span><span class=p>(</span><span class=n>usernameEq</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getUsername</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>teamNameEq</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getTeamName</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>ageGoe</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getAgeGoe</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>ageLoe</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getAgeLoe</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=n>content</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getQuerydsl</span><span class=p>().</span><span class=na>applyPagination</span><span class=p>(</span><span class=n>pageable</span><span class=p>,</span><span class=w> </span><span class=n>query</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>fetch</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>PageableExecutionUtils</span><span class=p>.</span><span class=na>getPage</span><span class=p>(</span><span class=n>content</span><span class=p>,</span><span class=w> </span><span class=n>pageable</span><span class=p>,</span><span class=w> </span><span class=n>query</span><span class=p>::</span><span class=n>fetchCount</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Page</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=nf>applyPagination</span><span class=p>(</span><span class=n>MemberSearchCondition</span><span class=w> </span><span class=n>condition</span><span class=p>,</span><span class=w> </span><span class=n>Pageable</span><span class=w> </span><span class=n>pageable</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>applyPagination</span><span class=p>(</span><span class=n>pageable</span><span class=p>,</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=o>-&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>query</span><span class=p>.</span><span class=na>selectFrom</span><span class=p>(</span><span class=n>member</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>leftJoin</span><span class=p>(</span><span class=n>member</span><span class=p>.</span><span class=na>team</span><span class=p>,</span><span class=w> </span><span class=n>team</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>.</span><span class=na>where</span><span class=p>(</span><span class=n>usernameEq</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getUsername</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>teamNameEq</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getTeamName</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>ageGoe</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getAgeGoe</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                </span><span class=n>ageLoe</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getAgeLoe</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Page</span><span class=o>&lt;</span><span class=n>Member</span><span class=o>&gt;</span><span class=w> </span><span class=nf>applyPagination2</span><span class=p>(</span><span class=n>MemberSearchCondition</span><span class=w> </span><span class=n>condition</span><span class=p>,</span><span class=w> </span><span class=n>Pageable</span><span class=w> </span><span class=n>pageable</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>applyPagination</span><span class=p>(</span><span class=n>pageable</span><span class=p>,</span><span class=w> </span><span class=n>contentQuery</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>contentQuery</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>selectFrom</span><span class=p>(</span><span class=n>member</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>leftJoin</span><span class=p>(</span><span class=n>member</span><span class=p>.</span><span class=na>team</span><span class=p>,</span><span class=w> </span><span class=n>team</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>where</span><span class=p>(</span><span class=n>usernameEq</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getUsername</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>teamNameEq</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getTeamName</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>ageGoe</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getAgeGoe</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>ageLoe</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getAgeLoe</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>),</span><span class=w> </span><span class=n>countQuery</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>countQuery</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>select</span><span class=p>(</span><span class=n>member</span><span class=p>.</span><span class=na>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>from</span><span class=p>(</span><span class=n>member</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>leftJoin</span><span class=p>(</span><span class=n>member</span><span class=p>.</span><span class=na>team</span><span class=p>,</span><span class=w> </span><span class=n>team</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>.</span><span class=na>where</span><span class=p>(</span><span class=n>usernameEq</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getUsername</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>teamNameEq</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getTeamName</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>ageGoe</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getAgeGoe</span><span class=p>()),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                        </span><span class=n>ageLoe</span><span class=p>(</span><span class=n>condition</span><span class=p>.</span><span class=na>getAgeLoe</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>BooleanExpression</span><span class=w> </span><span class=nf>usernameEq</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>username</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>hasText</span><span class=p>(</span><span class=n>username</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>member</span><span class=p>.</span><span class=na>username</span><span class=p>.</span><span class=na>eq</span><span class=p>(</span><span class=n>username</span><span class=p>)</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>BooleanExpression</span><span class=w> </span><span class=nf>teamNameEq</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>teamName</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>hasText</span><span class=p>(</span><span class=n>teamName</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>team</span><span class=p>.</span><span class=na>name</span><span class=p>.</span><span class=na>eq</span><span class=p>(</span><span class=n>teamName</span><span class=p>)</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>BooleanExpression</span><span class=w> </span><span class=nf>ageGoe</span><span class=p>(</span><span class=n>Integer</span><span class=w> </span><span class=n>ageGoe</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ageGoe</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>member</span><span class=p>.</span><span class=na>age</span><span class=p>.</span><span class=na>goe</span><span class=p>(</span><span class=n>ageGoe</span><span class=p>)</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>BooleanExpression</span><span class=w> </span><span class=nf>ageLoe</span><span class=p>(</span><span class=n>Integer</span><span class=w> </span><span class=n>ageLoe</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ageLoe</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>member</span><span class=p>.</span><span class=na>age</span><span class=p>.</span><span class=na>loe</span><span class=p>(</span><span class=n>ageLoe</span><span class=p>)</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://yosong6729.github.io/tags/querydsl/>Querydsl</a></li></ul><nav class=paginav><a class=next href=https://yosong6729.github.io/post/querydsl---%EC%8A%A4%ED%94%84%EB%A7%81-%EB%8D%B0%EC%9D%B4%ED%84%B0-jpa%EC%99%80-querydsl/><span class=title>Next »</span><br><span>[Querydsl] 스프링 데이터 JPA와 Querydsl</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://yosong6729.github.io/>Yosong6729 Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>